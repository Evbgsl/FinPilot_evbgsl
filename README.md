# FinPilot (FinPilot_evbgsl)

Консольное backend-приложение для управления личными финансами.  
Реализовано в рамках учебного проекта по ООП на Java.

Приложение позволяет:
- вести доходы и расходы;
- работать с категориями и бюджетами;
- получать отчёты и уведомления;
- выполнять переводы между пользователями;
- сохранять и загружать данные в JSON;
- экспортировать и импортировать состояние кошелька.

---

## Возможности

- Регистрация и авторизация пользователей (логин / пароль)
- Кошелёк, привязанный к авторизованному пользователю
- Доходы и расходы по категориям
- Бюджеты по категориям
- Уведомления:
  - достижение 80% лимита бюджета;
  - превышение лимита;
  - расходы превысили доходы
- Отчёты:
  - общая сводка;
  - по категориям;
  - по бюджетам
- Фильтрация отчётов:
  - по периоду (`--from`, `--to`);
  - по категориям (`--only`)
- Переводы между пользователями (двойная запись: `TRANSFER_OUT` / `TRANSFER_IN`)
- Сохранение данных в JSON при выходе
- Экспорт и импорт кошелька в JSON
- Unit-тесты, форматирование кода и CI

---

## Требования

- Java 17+
- Maven 3.x

---

## Сборка и запуск

### Проверка проекта (тесты + форматирование)
```bash
mvn clean verify
```

### Автоформатирование кода
```bash
mvn spotless:apply
```

### Запуск приложения
Запустить класс `Main` напрямую из IDE.

---

## Хранение данных

По умолчанию данные сохраняются локально:

- `wallets/<login>.json` — кошелёк пользователя
- `wallets/users.json` — список пользователей

Файлы создаются автоматически при работе приложения.

---

## Команды CLI

### Общие
- `help` — показать справку
- `exit` — выход из приложения (с сохранением данных)
- `whoami` — показать текущего пользователя

### Авторизация
- `register <login> <password>` — регистрация
- `login <login> <password>` — вход
- `logout` — выход из аккаунта

### Категории
- `category add <name>` — добавить категорию
- `category list` — список категорий

### Бюджеты
- `budget set <category> <amount>` — установить бюджет
- `budget list` — список бюджетов

### Операции
- `income add <category> <amount>` — добавить доход
- `expense add <category> <amount>` — добавить расход
- `balance` — текущий баланс

### Переводы
- `transfer to <login> <amount>` — перевод средств другому пользователю

### Отчёты
- `report summary [--from yyyy-mm-dd] [--to yyyy-mm-dd] [--only cat1,cat2]`
- `report categories [--from yyyy-mm-dd] [--to yyyy-mm-dd] [--only cat1,cat2]`
- `report budgets [--from yyyy-mm-dd] [--to yyyy-mm-dd] [--only cat1,cat2]`

### Экспорт / импорт
- `export json <path>` — экспорт текущего кошелька в JSON
- `import json <path>` — импорт кошелька из JSON (для текущего пользователя)

---

## Архитектура проекта

Проект разделён на логические слои:

- **core**  
  Доменная модель: `Money`, `Transaction`, `TransactionType`, `Wallet`, `Budget`

- **service**  
  Бизнес-логика:
  - `AuthService`
  - `WalletService`
  - `BudgetService`
  - `ReportService`
  - `NotificationService`

- **infra**  
  Работа с хранением и сериализацией:
  - `FileStorage`
  - `UserStorage`
  - DTO
  - Gson-адаптеры

- **cli**  
  Консольный интерфейс:
  - разбор команд;
  - валидация ввода;
  - вывод информации пользователю

---

## Пример работы

```text
> register u1 1
Пользователь зарегистрирован: u1

> login u1 1
Вход выполнен: u1

> category add food
Категория добавлена: food

> budget set food 1000
Бюджет установлен: food = 1000 ₽

> income add salary 2000
Доход добавлен

> expense add food 850
Расход добавлен
Предупреждение: вы достигли 80% бюджета по категории 'food'

> report summary
Общий доход: 2000 ₽
Общие расходы: 850 ₽
Баланс: 1150 ₽

> export json backup.json
Экспорт выполнен
```

---

## Тестирование и CI

- Unit-тесты находятся в `src/test/java`
- Форматирование проверяется плагином **Spotless**
- GitHub Actions запускает:
  ```bash
  mvn -B verify
  ```

CI гарантирует:
- успешную сборку;
- прохождение тестов;
- соблюдение стиля кода.

